
<!DOCTYPE html><html>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
<head lang="en">
    <meta charset="UTF-8">
    <title>Powerplant Scatter Plot</title>
    <style>
        h2 {text-align: center;}
	th, td {
	  padding: 15px;
	}
    </style>
</head>
<body>
<h1 class="display-2">
{{ date_start + ' - ' + date_end }}
</h1>
<div class="container-fluid">
	<div class="row">
        <div class="col-md-50">
            <div class="chart" id="scatter1">
           	<script>
               		 var graphs = {{plot1 | safe}};
               		 Plotly.plot('scatter1',graphs,{});
            	</script>
            </div>
        </div>
	</div>
	<div class="row">
		<div class="col-md-16">
		    <h2><a href="/scatter">1 Day</a> | <a href="/scatter?hours_back=72">3 Days</a> | <a href="/scatter?hours_back=168">7 Days</a></h2>
		</div>
	</div>
	<div class="row">
		<div class="col-md-50">
			<h2>Inside temp: {{ inside_temp }}</h2>
		   	<h2>Outside temp: {{ outside_temp }}</h2>
		    	<h2>Delta temp: {{ delta_temp }}</h2>
		   	<h2>Fan Temp: {{ fan_temp }}</h2>
		</div>
	</div>
    <hr />
    <h2>WATER</h2>
    <table>
	    {%for valve in valve_config_list%}
	    	<tr>
			<form action="valves/{{ valve['valve_id'] }}/water" method="post">
				<th><label for="valves_water_{{ valve['valve_id'] }}">Water {{ valve['description'] }}:</label></th>
				<th><input type="text" value="60" id="valves_open_duration" name="open_duration_seconds"></th>
	    			<th><input type="hidden" name="valve_id" value="{{ valve['valve_id'] }}" /></th>
	    			<th><input type="submit" value="Set Queue"></th>
		   	</form>
		</tr>
	    {%endfor%}

    		<tr>
	    		<form action="valves/water" method="post">
				<th><label for="valves_all">Water All:</label></th>
				<th><input type="text" value="60" id="valves_open_duration" name="open_duration_seconds"></th>
				<th><input type="submit" value="Queue All"></th>
	    		</form>
    		</tr>
    </table>
    <h3>
	    Current Queue
    </h3>
    <div>
	    <div class="col-md-6">
		<ul>
			<!-- For loop logic of jinja template -->
			{%for entry in watering_queue%}
				<li>{{ entry['valve_description'] }} - {{ entry['open_duration_seconds'] }} seconds</li>
			{%endfor%}
		</ul>    
	    </div>
    </div>

    <h2>FAN</h2>
    <div>
	    <div class="col-md-6">
		    <form action="/fan-config/temp" method="post">
			<label for="fan_temp">Fan temp:</label>
			<input type="text" value="{{ fan_temp  }}" id="fan_temp" name="fan_temp">
			<input type="submit" value="Submit"> 
		    </form>
	    </div>
    </div>
    <br />
    
            <div class="chart" id="bar1">
           	<script>
               		 var bar_graphs = {{fan_data_object | safe}};
               		 Plotly.plot('bar1', bar_graphs,{});
            	</script>
            </div>
</div>
</body>
</html>
